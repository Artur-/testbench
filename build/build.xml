<?xml version="1.0"?>

<project name="Testbench build" basedir="." default="package">
	<tstamp />
	<property name="version" value="${DSTAMP}${TSTAMP}" />

	<target name="package">
		<mkdir dir="output" />
		<jar jarfile="output/vaadin-testbench-2.0.development-${version}.jar" compress="true">
			<manifest>
				<attribute name="Class-Path" value="junit-4.5.jar selenium-java-client-driver.jar js.jar" />
			</manifest>
			<fileset dir="../bin">
			</fileset>
			<!--
			<fileset dir="../lib">
				<patternset>
					<exclude name="*-src.jar" />
					<exclude name="*-sources.jar" />
				</patternset>
			</fileset>
			-->
		</jar>
		
		<!-- Create the Testbench IDE FireFox plugin -->
		<subant target="extension">
			<fileset dir="../testbench-ide" includes="build.xml"/>
		</subant>
				
		<zip destfile="output/vaadin-testbench-2.0.development-${version}.zip">
			<fileset dir="../doc" includes="INSTALL.TXT" />
			<fileset dir="output" includes="vaadin-testbench-2.0.development-${version}.jar" />
			<fileset dir=".." includes="selenium-extensions/**" />
			<fileset dir=".." includes="lib/commons-io-* lib/commons-codec-* lib/js.jar lib/junit*.jar lib/selenium-java-client*" excludes="lib/**-source* lib/**-src*" />
			<fileset dir=".." includes="example/test.xml example/tests/**" />
			<fileset dir="../testbench-ide/" includes="extension/Testbench-ide.xpi" />
		</zip>

	</target>


</project>
