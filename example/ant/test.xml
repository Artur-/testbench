<?xml version="1.0"?>

<project name="Example Testing Script" basedir="." default="run-tests">

	<!-- classpath must include test bench jar and its dependencies -->
	<path id="classpath">
		<fileset dir=".." includes="vaadin-testbench-standalone-*.jar" />

		<!-- BEGIN: For development environment compatibility only -->
		<fileset dir="../../lib/" includes="*.jar" />
		<path location="../../bin" />
		<!-- END: development environment compatibility -->
	</path>

	<!-- Remove old error screenshots. -->
	<target name="remove-error-screens">
		<delete dir="screenshots/errors" failonerror="false"/>
		<mkdir dir="screenshots/errors" />
	</target>


	<!-- This target complies the generated java junit tests. -->
	<target name="compile-tests">
		<mkdir dir="classes" />
		<javac srcdir="src" destdir="classes" debug="on" encoding="utf-8">
			<classpath>
				<path refid="classpath" />
			</classpath>
		</javac>
	</target>


	<!-- This target runs the generated and compiled junit tests -->
	<target name="run-tests" depends="compile-tests, remove-error-screens">
		<junit fork="yes">
			<classpath>
				<path refid="classpath" />
				<pathelement path="classes" />
			</classpath>

			<formatter type="brief" usefile="false" />
				
			<batchtest>
				<fileset dir="src">
					<include name="**/**.java" />
				</fileset>
			</batchtest>
		</junit>
	</target>
	
</project>
